{"ast":null,"code":"import _slicedToArray from \"/Users/p0s00zi/__personal/extra/whatsapp-BigQuiz/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/p0s00zi/__personal/extra/whatsapp-BigQuiz/src/App.js\";\nimport React, { useState, useRef, useEffect } from 'react'; //import JSZip from 'jszip';\n//import fs from 'fs';\n//import { parseString } from 'whatsapp-chat-parser';\n//import Dropzone from './components/Dropzone/Dropzone';\n\nimport MessageViewer from './components/MessageViewer/MessageViewer';\nimport Credits from './components/Credits/Credits';\nimport * as S from './style';\nimport useDebounce from './hooks/useDebounce'; // const resources = {\n//   parsedChat: require('./assets/__chat.json')\n// }\n//import exampleChat from './assets/whatsapp-chat-example.zip';\n//import initialChat from './assets/__chat.json';\n// const showError = (message, err) => {\n//   console.error(err || message); // eslint-disable-line no-console\n//   alert(message); // eslint-disable-line no-alert\n// };\n\nconst App = () => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        messages = _useState2[0],\n        setMessages = _useState2[1];\n\n  const _useState3 = useState(5000),\n        _useState4 = _slicedToArray(_useState3, 2),\n        messagesLimit = _useState4[0],\n        setMessagesLimit = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        isMenuOpen = _useState6[0],\n        setIsMenuOpen = _useState6[1];\n\n  const closeButtonRef = useRef(null);\n  const openButtonRef = useRef(null);\n  const isFirstRender = useRef(true); //const fileContents = fs.readFileSync({initialChat}, 'utf8');\n\n  const closeMenu = () => {\n    setIsMenuOpen(false);\n  };\n\n  const openMenu = () => {\n    setIsMenuOpen(true);\n  }; // const loginconsole = file => {\n  //   console.log('msg: ' + file);\n  // };\n\n\n  async function getData() {\n    const res = await fetch(\"./__chat.json\");\n    const data = await res.text(); //console.log(data);\n\n    setMessages(JSON.parse(data)); //return this.setState({ data });\n  }\n\n  useEffect(() => {\n    if (isFirstRender.current) {\n      //processFile({fileContents});\n      //console.log('initialChat: ' + {initialChat});\n      getData();\n      return;\n    }\n\n    if (isMenuOpen) closeButtonRef.current.focus();else openButtonRef.current.focus();\n  }, [isMenuOpen]);\n  useEffect(() => {\n    isFirstRender.current = false;\n  }, []);\n  useEffect(() => {\n    const keyDownHandler = e => {\n      if (e.keyCode === 27) closeMenu();\n    };\n\n    document.addEventListener('keydown', keyDownHandler);\n    return () => document.removeEventListener('keydown', keyDownHandler);\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(S.GlobalStyles, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"header relative\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container relative\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card relative\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"quiz\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \"BigQuiz \\uD83D\\uDCAC\"))))), React.createElement(\"div\", {\n    className: \"container relative\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card box-shadow relative\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(S.Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(MessageViewer, {\n    messages: messages,\n    limit: useDebounce(messagesLimit, 5000),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }), React.createElement(S.MenuOpenButton, {\n    type: \"button\",\n    onClick: openMenu,\n    ref: openButtonRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, \"Open menu\"), React.createElement(S.Overlay, {\n    type: \"button\",\n    isActive: isMenuOpen,\n    onClick: closeMenu,\n    tabIndex: \"-1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }), React.createElement(S.Sidebar, {\n    isOpen: isMenuOpen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(S.MenuCloseButton, {\n    type: \"button\",\n    onClick: closeMenu,\n    ref: closeButtonRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, \"Close menu\"), React.createElement(S.SidebarContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, React.createElement(S.Field, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, React.createElement(S.Label, {\n    htmlFor: \"limit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, \"Messages limit\"), React.createElement(S.Input, {\n    id: \"limit\",\n    type: \"number\",\n    min: \"0\",\n    max: messages.length,\n    value: messagesLimit,\n    onChange: e => setMessagesLimit(parseInt(e.currentTarget.value, 10)),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }), React.createElement(S.InputDescription, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, \"A high number may freeze the page for a while, change this with caution\")), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(Credits, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }))))))), React.createElement(\"div\", {\n    className: \"container relative\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card relative footer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, \"Developed with \\uD83D\\uDC9C by \", React.createElement(\"a\", {\n    href: \"https://pratikshah.website\",\n    target: \"_blank\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, \"Pratik Shah\"))));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/p0s00zi/__personal/extra/whatsapp-BigQuiz/src/App.js"],"names":["React","useState","useRef","useEffect","MessageViewer","Credits","S","useDebounce","App","messages","setMessages","messagesLimit","setMessagesLimit","isMenuOpen","setIsMenuOpen","closeButtonRef","openButtonRef","isFirstRender","closeMenu","openMenu","getData","res","fetch","data","text","JSON","parse","current","focus","keyDownHandler","e","keyCode","document","addEventListener","removeEventListener","length","parseInt","currentTarget","value"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\n//import JSZip from 'jszip';\n//import fs from 'fs';\n//import { parseString } from 'whatsapp-chat-parser';\n\n//import Dropzone from './components/Dropzone/Dropzone';\n\nimport MessageViewer from './components/MessageViewer/MessageViewer';\nimport Credits from './components/Credits/Credits';\nimport * as S from './style';\n\nimport useDebounce from './hooks/useDebounce';\n\n// const resources = {\n//   parsedChat: require('./assets/__chat.json')\n// }\n\n//import exampleChat from './assets/whatsapp-chat-example.zip';\n//import initialChat from './assets/__chat.json';\n\n// const showError = (message, err) => {\n//   console.error(err || message); // eslint-disable-line no-console\n//   alert(message); // eslint-disable-line no-alert\n// };\n\nconst App = () => {\n  const [messages, setMessages] = useState([]);\n  const [messagesLimit, setMessagesLimit] = useState(5000);\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n\n  const closeButtonRef = useRef(null);\n  const openButtonRef = useRef(null);\n  const isFirstRender = useRef(true);\n\n  //const fileContents = fs.readFileSync({initialChat}, 'utf8');\n\n  const closeMenu = () => {\n    setIsMenuOpen(false);\n  };\n\n  const openMenu = () => {\n    setIsMenuOpen(true);\n  };\n\n  // const loginconsole = file => {\n  //   console.log('msg: ' + file);\n  // };\n\n  async function getData() {\n    const res = await fetch(\"./__chat.json\");\n    const data = await res.text();\n    //console.log(data);\n    setMessages(JSON.parse(data));\n    //return this.setState({ data });\n  }\n\n  useEffect(() => {\n    if (isFirstRender.current) {\n      //processFile({fileContents});\n      //console.log('initialChat: ' + {initialChat});\n      getData();\n      return;\n    }\n\n    if (isMenuOpen) closeButtonRef.current.focus();\n    else openButtonRef.current.focus();\n  }, [isMenuOpen]);\n\n  useEffect(() => {\n    isFirstRender.current = false;\n  }, []);\n\n  useEffect(() => {\n    const keyDownHandler = e => {\n      if (e.keyCode === 27) closeMenu();\n    };\n\n    document.addEventListener('keydown', keyDownHandler);\n    return () => document.removeEventListener('keydown', keyDownHandler);\n  }, []);\n\n  return (\n    <>\n      <S.GlobalStyles />\n      <div className=\"header relative\">\n        <div className=\"container relative\">\n        <div className=\"card relative\">\n          <div>\n          <span className=\"quiz\">BigQuiz 💬</span>\n          </div>\n        </div>\n        </div>\n      </div>\n      <div className=\"container relative\">\n      <div className=\"card box-shadow relative\">\n      <S.Container>\n        <MessageViewer\n          messages={messages}\n          limit={useDebounce(messagesLimit, 5000)}\n        />\n        <S.MenuOpenButton type=\"button\" onClick={openMenu} ref={openButtonRef}>\n          Open menu\n        </S.MenuOpenButton>\n        <S.Overlay\n          type=\"button\"\n          isActive={isMenuOpen}\n          onClick={closeMenu}\n          tabIndex=\"-1\"\n        />\n        <S.Sidebar isOpen={isMenuOpen}>\n          <S.MenuCloseButton\n            type=\"button\"\n            onClick={closeMenu}\n            ref={closeButtonRef}\n          >\n            Close menu\n          </S.MenuCloseButton>\n          <S.SidebarContainer>\n            <S.Field>\n              <S.Label htmlFor=\"limit\">Messages limit</S.Label>\n              <S.Input\n                id=\"limit\"\n                type=\"number\"\n                min=\"0\"\n                max={messages.length}\n                value={messagesLimit}\n                onChange={e =>\n                  setMessagesLimit(parseInt(e.currentTarget.value, 10))\n                }\n              />\n              <S.InputDescription>\n                A high number may freeze the page for a while, change this with\n                caution\n              </S.InputDescription>\n            </S.Field>\n\n            <div>\n              <Credits />\n            </div>\n          </S.SidebarContainer>\n        </S.Sidebar>\n      </S.Container>\n      </div>\n      </div>\n      <div className=\"container relative\">\n        <div className=\"card relative footer\">\n          Developed with 💜 by <a href=\"https://pratikshah.website\" target=\"_blank\">Pratik Shah</a>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}