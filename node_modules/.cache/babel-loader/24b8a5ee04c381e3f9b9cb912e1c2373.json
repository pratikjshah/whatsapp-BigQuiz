{"ast":null,"code":"import _objectSpread from \"/Users/p0s00zi/__personal/extra/whatsapp-BigQuiz/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/p0s00zi/__personal/extra/whatsapp-BigQuiz/src/components/MessageViewer/MessageViewer.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Message from '../Message/Message';\nimport * as S from './style';\nimport { authorColors } from '../../utils/colors';\n\nconst MessageViewer = ({\n  messages,\n  limit\n}) => {\n  //console.log('In MessageViewer');\n  const participants = Array.from(new Set(messages.map(({\n    author\n  }) => author))).filter(author => author !== 'System');\n  var activeUserIndex = 1;\n\n  if (participants.length > 2) {\n    var min = 1;\n    var max = participants.length - 1;\n    activeUserIndex = Math.floor(Math.random() * (max - min + 1) + min);\n  } //console.log('activeUserIndex: '+ activeUserIndex + '  |  participants.length: ' + participants.length);\n\n\n  const activeUser = participants[activeUserIndex];\n  const colorMap = participants.reduce((obj, participant, i) => {\n    return _objectSpread({}, obj, {\n      [participant]: authorColors[i % authorColors.length]\n    });\n  }, {});\n  const renderedMessages = messages.slice(0, limit);\n  const isLimited = renderedMessages.length !== messages.length;\n  var title = renderedMessages[0];\n  console.log(\"renderedMessages: \" + JSON.stringify(title.date));\n  const quizTitle = \"Random\";\n  return React.createElement(S.Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, messages.length > 0 && React.createElement(\"div\", {\n    className: \"quizTitle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, quizTitle), messages.length > 0 && React.createElement(S.P, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(S.Info, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, \"Showing \", isLimited ? 'first' : 'all', \" \", renderedMessages.length, ' ', \"messages \", isLimited && React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, \"(out of \", messages.length, \")\"))), React.createElement(S.List, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, renderedMessages.map((message, i, arr) => {\n    const prevMessage = arr[i - 1];\n    return React.createElement(Message, {\n      key: i // eslint-disable-line react/no-array-index-key\n      ,\n      message: message,\n      date: message.date,\n      color: colorMap[message.author],\n      isActiveUser: activeUser === message.author,\n      isQuestion: message.isQuestion,\n      hasAttachment: message.hasAttachment,\n      sameAuthorAsPrevious: prevMessage && prevMessage.author === message.author,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    });\n  })));\n};\n\nMessageViewer.propTypes = {\n  messages: PropTypes.arrayOf(PropTypes.shape({\n    date: PropTypes.string,\n    author: PropTypes.string,\n    message: PropTypes.string,\n    isQuestion: PropTypes.bool,\n    hasAttachment: PropTypes.bool\n  })).isRequired,\n  limit: PropTypes.number\n};\nMessageViewer.defaultProps = {\n  limit: Infinity\n};\nexport default React.memo(MessageViewer);","map":{"version":3,"sources":["/Users/p0s00zi/__personal/extra/whatsapp-BigQuiz/src/components/MessageViewer/MessageViewer.js"],"names":["React","PropTypes","Message","S","authorColors","MessageViewer","messages","limit","participants","Array","from","Set","map","author","filter","activeUserIndex","length","min","max","Math","floor","random","activeUser","colorMap","reduce","obj","participant","i","renderedMessages","slice","isLimited","title","console","log","JSON","stringify","date","quizTitle","message","arr","prevMessage","isQuestion","hasAttachment","propTypes","arrayOf","shape","string","bool","isRequired","number","defaultProps","Infinity","memo"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Message from '../Message/Message';\nimport * as S from './style';\n\nimport { authorColors } from '../../utils/colors';\n\nconst MessageViewer = ({ messages, limit }) => {\n  //console.log('In MessageViewer');\n  const participants = Array.from(\n    new Set(messages.map(({ author }) => author)),\n  ).filter(author => author !== 'System');\n  var activeUserIndex = 1;\n  if (participants.length > 2) {\n    var min = 1;\n    var max = participants.length - 1;\n    activeUserIndex =  Math.floor(Math.random() * (max - min + 1) + min);\n  }\n  //console.log('activeUserIndex: '+ activeUserIndex + '  |  participants.length: ' + participants.length);\n  const activeUser = participants[activeUserIndex];\n\n  const colorMap = participants.reduce((obj, participant, i) => {\n    return { ...obj, [participant]: authorColors[i % authorColors.length] };\n  }, {});\n  const renderedMessages = messages.slice(0, limit);\n  const isLimited = renderedMessages.length !== messages.length;\n\n\n  var title = renderedMessages[0];\n  console.log(\"renderedMessages: \" + JSON.stringify(title.date));\n  const quizTitle = \"Random\";\n\n  return (\n    <S.Container>\n      {messages.length > 0 && (\n        <div className=\"quizTitle\">{quizTitle}</div>\n      )}\n\n      {messages.length > 0 && (\n        <S.P>\n          <S.Info>\n            Showing {isLimited ? 'first' : 'all'} {renderedMessages.length}{' '}\n            messages {isLimited && <span>(out of {messages.length})</span>}\n          </S.Info>\n        </S.P>\n      )}\n\n      <S.List>\n        {renderedMessages.map((message, i, arr) => {\n          const prevMessage = arr[i - 1];\n\n          return (\n            <Message\n              key={i} // eslint-disable-line react/no-array-index-key\n              message={message}\n              date={message.date}\n              color={colorMap[message.author]}\n              isActiveUser={activeUser === message.author}\n              isQuestion={message.isQuestion}\n              hasAttachment={message.hasAttachment}\n              sameAuthorAsPrevious={\n                prevMessage && prevMessage.author === message.author\n              }\n            />\n          );\n        })}\n      </S.List>\n    </S.Container>\n  );\n};\n\nMessageViewer.propTypes = {\n  messages: PropTypes.arrayOf(\n    PropTypes.shape({\n      date: PropTypes.string,\n      author: PropTypes.string,\n      message: PropTypes.string,\n      isQuestion: PropTypes.bool,\n      hasAttachment: PropTypes.bool\n    }),\n  ).isRequired,\n  limit: PropTypes.number,\n};\n\nMessageViewer.defaultProps = {\n  limit: Infinity,\n};\n\nexport default React.memo(MessageViewer);\n"]},"metadata":{},"sourceType":"module"}